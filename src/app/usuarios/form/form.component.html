<ul class="alert alert-danger" *ngIf="errores?.length > 0">
  <li *ngFor="let err of errores">
    {{err}}
  </li>
</ul>
<div class="container" id="formularioUsers">
  <div class="alert alert-info">{{ titulo }}</div>
      <form #usuarioForm="ngForm" style="margin-left: 2%;">

        <mat-horizontal-stepper >
  <mat-step >
      <ng-template matStepLabel>Datos del usuario</ng-template>
      <div class="rowcontents">
          <mat-form-field >
              <input matInput placeholder="Nombre" [(ngModel)]="usuario.nombre" name="nombre" required minlength="3" maxlength="35" #nombre="ngModel" />         
          </mat-form-field>
       
           <div class="alert alert-danger" *ngIf="nombre.invalid && (nombre.dirty || nombre.touched)">
            <div *ngIf="nombre.errors.required">
              El nombre es Requerido
            </div>
            <div *ngIf="nombre.errors.minlength">
              El nombre debe tener al menos 3 caracteres
            </div>
          </div>
      </div>
      <div class="rowcontents">
          <mat-form-field >
            <input matInput placeholder="Segundo nombre" [(ngModel)]="usuario.segundoNombre" name="segundoNombre" minlength="3"
            maxlength="35" #segnombre="ngModel"/>
          </mat-form-field>
       
          <div class="alert alert-danger" *ngIf="segnombre.invalid && (segnombre.dirty || segnombre.touched)">
              <div *ngIf="segnombre.errors.required">
                El segundo nombre es Requerido
              </div>
              <div *ngIf="segnombre.errors.minlength">
                El segundo nombre debe tener al menos 3 caracteres
              </div>
            </div>
      </div>
      <div class="rowcontents">
          <mat-form-field >
              <input matInput placeholder="Apellido" [(ngModel)]="usuario.apellido" name="apellido" required minlength="3"
            maxlength="35" #apellido="ngModel"/>
          </mat-form-field>
       
          <div class="alert alert-danger" *ngIf="apellido.invalid && (apellido.dirty || apellido.touched)">
              <div *ngIf="apellido.errors.required">
                El apellido es Requerido
              </div>
              <div *ngIf="apellido.errors.minlength">
                El apellido debe tener al menos 3 caracteres
              </div>
            </div>
      </div>
      <div class="rowcontents">
          <mat-form-field >
              <input matInput placeholder="Segundo apellido"  [(ngModel)]="usuario.segundoApellido" name="segundoApellido"
            minlength="3" maxlength="35" #segapellido="ngModel"/>
          </mat-form-field>
       
          <div class="alert alert-danger" *ngIf="segapellido.invalid && (segapellido.dirty || segapellido.touched)">
              <div *ngIf="segapellido.errors.minlength">
                El segundo apellido debe tener al menos 3 caracteres
              </div>
            </div>
      </div>
      <div class="rowcontents">
          <mat-form-field >
            <input matInput placeholder="Username" [(ngModel)]="usuario.username" name="username" required minlength="8"
            maxlength="18" #username="ngModel"/>
          </mat-form-field>
       
          <div class="alert alert-danger" *ngIf="username.invalid && (username.dirty || username.touched)">
              <div *ngIf="username.errors.required">
                El Usuario es Requerido
              </div>
              <div *ngIf="apellido.errors.minlength">
                El usuario debe tener al menos 8 caracteres
              </div>
            </div>
      </div>
      <div class="rowcontents">
          <mat-form-field >
              <input matInput placeholder="Numero de documento" [(ngModel)]="usuario.numIdenti" name="numeroDocumento" required
              minlength="3" maxlength="35" #numDoc="ngModel"/>
          </mat-form-field>
       
          <div class="alert alert-danger" *ngIf="numDoc.invalid && (numDoc.dirty || numDoc.touched)">
            <div *ngIf="numDoc.errors.required">
                  El numero de documento es Requerido
            </div>  
            <div *ngIf="numDoc.errors.minlength">
                El numero debe tener al menos 3 caracteres
              </div>
            </div>
      </div>
          <div class="rowcontents">
              <mat-form-field>
                  <mat-label>Tipo de documento</mat-label>
                  <mat-select [(ngModel)]="usuario.tipoIdenti" #tipoDoc="ngModel" required>
                    <mat-option *ngFor="let food of foods" [value]="food.value">
                      {{food.viewValue}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              <div class="alert alert-danger" *ngIf="tipoDoc.invalid && (tipoDoc.dirty || tipoDoc.touched)">
                  <div *ngIf="tipoDoc.errors.minlength">
                    El tipo de documento debe tener al menos 2 caracteres
                  </div>
                </div>
          </div>
          <div class="rowcontents">
              <mat-form-field >
                  <input matInput placeholder="Roles" [(ngModel)]="usuario.roles" name="roles" required minlength="8"
              maxlength="18" #roles="ngModel"/>
              </mat-form-field>
           
              <div class="alert alert-danger" *ngIf="roles.invalid && (roles.dirty || roles.touched)">
                  <div *ngIf="roles.errors.required">
                    El rol es Requerido
                  </div>
                  <div *ngIf="roles.errors.minlength">
                    El rol debe tener al menos 8 caracteres
                  </div>
                  </div>
          </div>
      <div>
        <button class="btn btn-primary" mat-button matStepperNext>Next</button>
      </div>
  </mat-step>
  <mat-step >
      <ng-template matStepLabel>Residencia del usuario</ng-template>
      <div class="rowcontents">
          <mat-form-field >
              <input matInput placeholder="Email" [(ngModel)]="usuario.email" name="email" email required minlength="10"
              maxlength="50" #email="ngModel"/>
          </mat-form-field>
       
          <div class="alert alert-danger" *ngIf="email.invalid && (email.dirty || email.touched)">
              <div *ngIf="email.errors.required">
                El email es Requerido
              </div>
              <div *ngIf="email.errors.minlength">
                El email debe tener al menos 3 caracteres
              </div>
              <div *ngIf="email.errors.email">
                  El formato de email no es correcto
                </div>
            </div>
      </div>
      <div class="rowcontents">
          <mat-form-field >
          <input matInput placeholder="Telefono" [(ngModel)]="usuario.telefono" name="telefono" 
          minlength="6" maxlength="10" #telefono="ngModel"/>
          </mat-form-field>
       
          <div class="alert alert-danger" *ngIf="telefono.invalid && (telefono.dirty || telefono.touched)">
              <div *ngIf="telefono.errors.minlength">
                El telefono debe tener al menos 3 caracteres
              </div>
            </div>
      </div>
      <div class="rowcontents">
          <mat-form-field >
              <input matInput placeholder="Celular" [(ngModel)]="usuario.celular" name="celular" required minlength="10"
              maxlength="18" #celular="ngModel"/>
          </mat-form-field>
       
          <div class="alert alert-danger" *ngIf="celular.invalid && (celular.dirty || celular.touched)">
              <div *ngIf="celular.errors.required">
                El celular es Requerido
              </div>
              <div *ngIf="celular.errors.minlength">
                El celular debe tener al menos 3 caracteres
              </div>
            </div>
      </div>
      <div class="rowcontents">
          <mat-form-field >
              <input matInput placeholder="Direccion" [(ngModel)]="usuario.direccion" name="direccion" 
          minlength="10" maxlength="80" #direccion="ngModel"/>
          </mat-form-field>
       
          <div class="alert alert-danger" *ngIf="direccion.invalid && (direccion.dirty || direccion.touched)">
              <div *ngIf="direccion.errors.minlength">
                El direccion debe tener al menos 10 caracteres
              </div>
            </div>
      </div>
      <div>
        <button class="btn btn-primary" mat-button matStepperPrevious>Atras</button>
        <button class="btn btn-primary" mat-button matStepperNext>Siguiente</button>
      </div>
  </mat-step>
  <mat-step>
      <ng-template matStepLabel>Datos Empresariales.</ng-template>
      <div class="rowcontents">
          <mat-form-field >
          <input matInput placeholder="Nombre de la empresa" [(ngModel)]="usuario.nombreEmpresa" name="nomEmpresa" required
            minlength="3" maxlength="35" #nomEmpresa="ngModel"/>
          </mat-form-field>
       
          <div class="alert alert-danger" *ngIf="nomEmpresa.invalid && (nomEmpresa.dirty || nomEmpresa.touched)">
              <div *ngIf="nomEmpresa.errors.required">
                El nombre de la empresa es Requerido
              </div>
              <div *ngIf="nomEmpresa.errors.minlength">
                El nombre debe tener al menos 3 caracteres
              </div>
            </div>
      </div>
      <div class="rowcontents">
          <mat-form-field >
          <input matInput placeholder="Direccion Empresa" [(ngModel)]="usuario.direcEmpresa" name="direcEmpresa"
           minlength="10" maxlength="80" #dirEmpresa="ngModel"/>
          </mat-form-field>
       
          <div class="alert alert-danger" *ngIf="dirEmpresa.invalid && (dirEmpresa.dirty || dirEmpresa.touched)">
              <div *ngIf="dirEmpresa.errors.minlength">
                El direccion de la empresa debe tener al menos 10 caracteres
              </div>
            </div>
      </div>
      <div class="rowcontents">
          <mat-form-field >
          <input matInput placeholder="Telefono empresa" [(ngModel)]="usuario.telefEmpresa" name="telefEmpresa" required
            minlength="5" maxlength="18" #telEmpresa="ngModel"/>
          </mat-form-field>
       
          <div class="alert alert-danger" *ngIf="telEmpresa.invalid && (telEmpresa.dirty || telEmpresa.touched)">
              <div *ngIf="telEmpresa.errors.minlength">
                El telefono de la empresa debe tener al menos 5 caracteres
              </div>
            </div>
      </div>
      <div class="rowcontents">
          <mat-form-field >
          <input matInput placeholder="Direccion" [(ngModel)]="usuario.nitEmpresa" name="nit" required minlength="8"
            maxlength="18" #nit="ngModel"/>
          </mat-form-field>
       
          <div class="alert alert-danger" *ngIf="nit.invalid && (nit.dirty || nit.touched)">
              <div *ngIf="nit.errors.required">
                El nit de la empresa es Requerido
              </div>
              <div *ngIf="nit.errors.minlength">
                El nit debe tener al menos 3 caracteres
              </div>
            </div>
      </div>
    <div>
      <button class="btn btn-primary" mat-button matStepperPrevious>Atras</button>
      <div  *ngIf="usuario.fechaNacimiento == null"> 
          <button class="btn btn-primary" role="button" (click)='create()' [disabled]="!usuarioForm.form.valid">Crear</button>
        </div>
          <div  *ngIf="usuario.fechaNacimiento != null"> 
              <button class="btn btn-primary" role="button" (click)='updateUser()' [disabled]="!usuarioForm.form.valid">Actualizar</button>
            </div>
      <button class="btn btn-primary" mat-button >Reiniciar</button>
    </div>
  </mat-step>
</mat-horizontal-stepper>

     

      <!-- <div class="form-group row col-25 floatLeftMarginRigth">
            <label for="fechaNaci" class="col-form-label marginRig28">Fecha de nacimiento</label>
            <div class="rowcontents">
              <input type="text" class="form-control" [(ngModel)]="usuario.fechaNacimiento" name="fechaNaci" />
            </div>
          </div>

        <div class="form-group row col-25 floatLeftMarginRigth">
          <label for="expDocIden" class="col-form-label marginRig28">Fecha Expedicion Documento</label>
          <div class="rowcontents">
            <input type="text" class="form-control" [(ngModel)]="usuario.fechaExpeDocumento" name="expDocIden" />
          </div>
        </div>
  
        <div class="form-group row col-25 floatLeftMarginRigth">
          <label for="conforEmpre" class="col-form-label marginRig28">Fecha de Conformacion de la empresa</label>
          <div class="rowcontents">
            <input type="text" class="form-control" [(ngModel)]="usuario.fechaConforEmpresa" name="conforEmpre" />
          </div>
        </div>-->

      

      
    </form>
</div>